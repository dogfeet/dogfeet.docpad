---
layout: 'article'
title: 'SSMA를 써보고 나서'
author: 'Changwoo Park'
date: '2010-06-09'
tags: ["MS","C","VS","ASP","Groovy","gsql","Oracle","SQLServer","ssma"]
---

<h2>억지로</h2>

<p>억지로 Oracle을 Sql Server로 포팅해야 할일이 생겼습니다. 간만에 생긴 여유시간을 핑계로 개인 업무나 즐기려고 했건만 억지로 맞겨져 버렸습니다.T_T;;</p>

<p>물론 자투리 시간을 활용해야 하기 때문에 sqlmap등의 일반 쿼리를 포팅업무는 주어지지 않았습니다. db schema랑 procedure, sequence등등만 옮기면 됐습니다. plan도 요구하지 않았습니다.</p>

<h2>SSMA</h2>

<p>SSMA는 Sql Server Migration Assistant의 약자로 MS에서 배포합니다. 3년전에 Java-&gt;C# Converter(정확한 이름이 생각 안납니다.)를 써본 경험으로 분명 MS에서 이런걸 만들어서 배포했을 것이라고 짐작했습니다. C#-&gt;Java의 경우 만족할만한 결과였습니다. 대체로 패턴이 비슷했기 때문에 Generics나 몇가지들만 손으로 수정해 주면 됐었습니다. 게다가 툴이 자동으로 제공하지 못하는 부분은 &#8216;나 못하겠다&#8217;라고 코멘트를 남겨주기 때문에 신뢰할 수 있었습니다.</p>

<p>SSMA를 사용하려면 Sql Server Express Edition으로는 안됩니다. 그래서 저는 Developer Edition을 사용했습니다.</p>

<p>SSMA는 두가지 프로그램으로 구성됩니다. 하나는 &#8216;SSMA 2008 for Oracle&#8217;라는 툴이고 다른 하나는 Sql Server의 sysdb영역에  function이나 procedure형태로 설치되는 &#8216;SSMA 2008 for Oracle Extension Pack&#8217;입니다.</p>

<h2>결과</h2>

<p>윈도우를 준비하고(VMware - 물론 윈도만 깔린 깨긋한 버전을 가지고 다님) Sql Server를 설치하기 까지(처음에는 Express Edition을 설치했으나 최종적으로 Developer Edition을 설치함) 이틀이 소요됐습니다. 역시 안하던 걸하려니 삽질을 하게 되는 군요. Sql Server를 세번이나 설치했습니다.T_T;;</p>

<p>SSMA를 익히고 DB schema를 옮기는데 하루를 들였습니다. DB schema는 별로 손댈게 없었습니다. production 환경에서 &#8216;SSMA 2008 for Oracle Extension Pack&#8217;을 설치할 일이 없도록 &#8216;SSMA 2008 for Oracle Extension Pack&#8217;에서 제공하는 function를 제거하는 것까지 포함해서 하루였습니다.</p>

<p>데모 데이터를 이전하는데에도 하루가 걸렸습니다. SSMA에서도 Data Migration을 지원하긴 하지만 Oracle에 &#8216;Tester 어쩌구&#8217;하는 것을 설치해야 하는 듯 싶었습니다. 그래서 groovy gsql로 간단히 제작하여 이전하였습니다. 역시 groovy gsql은 강력합니다. 약 30개 테이블의 데이터를 이전하는 스크립트를 작성하는데 6시간이면 되더군요&#8230;하핫. groovy를 자주 사용하면 4시간 정도로 단축할 수도 있을 것 같은데 잘 쓸일이 생기지 않아서 할 때마다 헤메고 있습니다. eclipse groovy plugin의 groovy editor도 많이 좋아졌습니다. 이제 조금은 쓸만해 졌습니다. 2년안에 안정적으로 사용할 수 있을 듯 싶습니다.</p>

<p>그리고 간단한 function들을 포팅하는데 반나절 정도 걸렸습니다.</p>

<p>그리고 마지막으로 procedure는 오래 걸렸습니다. procedure자체가 2000라인을 넘는 데다가 Dynamic sql은 SSMA가 전혀 포팅을 해주지 않더군요. 그래서 하나하나 손으로 작업하고 변환하는데 4일걸렸습니다. 언제나 지루하고 기계적인 일은 의욕을 감퇴시킴니다.-_-;;;</p>

<p>사수분이 2주면 될 것이라고 했는데 처음 지켜보는 군요. 보통 사수분이 이틀이라고 말하면 1.5배인 사흘이 걸렸었는데 처음으로 기한을 지켜봅니다.(물론 사수분의 정확도에 존경심을 표합니다. 제가 예측하면 2배는 차이가 나곤 하는데 말입니다.)</p>

<p>시간관계상 간단한 테스트밖에 하지 못했기 때문에 버그 존재할 것으로 생각되는데 그부분을 확인해보지 못한 것이 좀 아쉽습니다.</p>

<p>2001년에 Sql Server를 처음이자 마지막으로 써본 경험에 비하면 굉장한 생산성입니다. TSQL도 처음 써봤을 뿐만아니라 SQL Server의 데이터 타입, 내장 함수등등이 거의 전무한 상태로 수행한 일이라 조금 뿌듯합니다.</p>