---
layout: 'article'
title: 'New In Javascript 1.8.1'
author: 'Changwoo Park'
date: '2011-09-30'
tags: ["New In JavaScript","JavaScript","JavaScript Standard"]
---

<p>이 버전에서의 Gecko 1.9.1(FireFox 3.5)는 성능을 위해 Tracemonkey just-in-time compiler라는 것을 추가하고 중요한 low level API 변경했음.</p>

<h4>Language additions</h4>

<h5>Object.getPrototypeOf()</h5>

<p><a href="http://ejohn.org/blog/objectgetprototypeof/">getPrototypeOf</a>(<a href="http://dogfeet.tumblr.com/post/11005288533/object-getprototypeof">번역</a>)대한 John Resig의 글.</p>

<h5>Using native JSON</h5>

<p>Object-&gt;JSON은 stringify()로 하고 JSON-&gt;Object parse()메소드를 이용한다. 그리고 JSON은 method가 포함된 객체를 지원하지 않는다. 만약 JSON으로 method가 포함된 객체를 변환하고자 하면 TypeError를 던질 것이다.</p>

<p>parse()는 다음과 같이 사용하면 된다:</p>

<pre><code>#!js
var jsObject = JSON.parse(jsonString);
</code></pre>

<p>단 다음과 같은 것은 에러가 나니 주의:</p>

<pre><code>// both will throw an SyntaxError as of JavaScript 1.8.5
var jsObject = JSON.parse("[1, 2, 3, 4, ]");
var jsObject = JSON.parse("{ \"foo\" : 1, }");
</code></pre>

<p>stringify()는 다음과 같이 사용한다.</p>

<pre><code>var foo = {};  
foo.bar = "new property";  
foo.baz = 3;  

var jsonString = JSON.stringify(foo);
//jsonString = {"bar":"new property","baz":3}
</code></pre>

<p>stringify()의 문법은 다음과 같다.</p>

<pre><code>jsonString = JSON.stringify(value [, replacer [, space]])
</code></pre>

<ul><li>value: 객체</li>
<li>replacer: replacer는 프로퍼티를 선별적으로 변환할 때 사용한다. 만약 replacer가 생략되거나 null이면 모든 프로퍼티를 변환한다.</li>
<li>space: space는 JSON String을 사람이 읽기 좋도록 예쁘게 만드는 역활이다. space가 Number면 그 수만큼 space 문자로 공백을 줄 것이고 String이면 그 스트링을 공백으로 사용한다. 물론 둘다 최대크기는 10이다. 그 보다 큰 값이 입력됐을 때 Number는 10이, String은 앞 10자만 사용될 것이다.</li>
</ul><p>replacer를 사용하는 예제를 보자:</p>

<pre><code>function censor(key, value) {
  if (typeof(value) == "string") {
    return undefined;//or return null
  }
  return value;
}

var foo = {foundation: "Mozilla", model: "box", week: 45, transport: "car", month: 7};
var jsonString = JSON.stringify(foo, censor);
//jsonString = {"week":45,"month":7}
</code></pre>

<p>replacer에 function대신 Arrray를 사용할 수도 있다:</p>

<pre><code>console.log(JSON.stringify({ a: 2, b:3 }, ['a']));
//{"a":2}
</code></pre>

<p>space를 사용하는 예제를 보자:</p>

<pre><code>console.log(JSON.stringify({ a: 2 }, null, "  "));
// '{\n "a": 2\n}'
</code></pre>

<p>해당 객체마다 custom하게 JSON으로 serialize하고 싶으면 toJSON프로퍼티에 메소드를 할당하면 된다:</p>

<pre><code>var x = {
  foo: 'foo',
  toJSON: function () {
    return 'bar';
  }
};
var json = JSON.stringify({x: x});
//json = {"x":"bar"}
</code></pre>

<h5>String.trim(), trimLeft(), trimRight()</h5>

<p>공백 문자를 제거하는 함수가 추가됨:</p>

<pre><code>var orig = "   foo  ";
console.log(orig.trim());// "foo"
</code></pre>

<p>왼쪽 것만 제거</p>

<pre><code>console.log(orig.trimLeft());// "foo  "
</code></pre>

<p>오른 쪽 것만 제거</p>

<pre><code>console.log(orig.trimLeft());// "  foo"
</code></pre>